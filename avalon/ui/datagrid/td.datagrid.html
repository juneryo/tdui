<div class="td_datagrid_container">
	<nav class="navbar navbar-default no_margin">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" ms-click="toggle($event, 'button')">
					<span class="sr-only"></span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="javascript:void(0)">{{title}}</a>
			</div>
			<div class="collapse navbar-collapse" ms-visible="showButtons">
				<ul class="nav navbar-nav navbar-right">
					<li><a href="javascript:void(0)" class="waves-effect waves-light" ms-click="toggle($event, 'filter')"><span class="glyphicon glyphicon-filter"></span>&nbsp;筛选</a></li>
					<li><a href="javascript:void(0)" class="waves-effect waves-light" ms-if="content!=''" ms-click="toggle($event, 'query')"><span class="glyphicon glyphicon-search"></span>&nbsp;查询</a></li>
					<li class="dropdown" ms-if="buttons.length>0">
						<a href="javascript:void(0)" class="dropdown-toggle waves-effect waves-light" ms-click="toggle($event, 'panel')">其他操作<span class="caret"></span></a>
						<ul class="dropdown-menu" ms-if="buttons.length>0" ms-visible="showPanel">
							<li ms-repeat="buttons">
								<a href="javascript:void(0)" class="waves-effect waves-light" ms-click="clickAction($event, el.fun)"><span ms-if="el.icon" ms-attr-class="el.icon"></span>{{el.display}}</a>
							</li>
						</ul>
					</li>
				</ul>
			</div>
		</div>
	</nav>
	<div ms-visible="showQuery">
		{{content|html}}
	</div>
	<div style="overflow:hidden;">
		<table class="table table-hover td_datagrid relative_pos" ms-css-left="scrollLeft">
			<thead>
				<tr>
					<th width="45" ms-visible="checkbox">
						<i class="td_datagrid_icon" ms-class-1="td_datagrid_checked: allSelected" ms-class-2="td_datagrid_unchecked: !allSelected" ms-click="clickCheckbox($event, -1)"></i>
					</th>
					<th ms-repeat="cols" ms-attr-width="{{el.width}}" ms-css-width="{{el.width}}">{{el.display}}</th>
					<th width="150">
					</th>
					<th></th>
					<th ms-visible="!checkbox"></th>
				</tr>
				<tr ms-visible="showFilter">
					<th ms-visible="checkbox">
					</th>
					<th class="td_datagrid_filter" ms-repeat="cols">
						<input type="text" ms-if="el.type == 'text'" ms-attr-name="{{el.name}}" ms-css-width="{{el.width - 20}}" ms-input="filterRow($index, el.name)" />
						<select ms-if="el.type == 'select'" ms-attr-name="{{el.name}}" ms-css-width="{{el.width - 20}}" ms-change="filterRow($index, el.name)">
							<option value=""></option>
							<option ms-repeat="el.option" ms-attr-value="{{$key}}">{{$val}}</option>
						</select>
					</th>
					<th></th>
					<th ms-visible="!checkbox"></th>
				</tr>
			</thead>
		</table>
	</div>
	<div style="overflow:auto;" ms-css-height="height" ms-scroll="scrollTable($event)" ms-on-mousewheel="wheelTable($event)">
		<table class="table table-hover td_datagrid margin_bottom2">
			<tbody>
				<tr ms-repeat="rows" ms-class-1="td_datagrid_tr_edit: editIdx==$index" ms-class-2="td_datagrid_tr_selected: el.selected==true||el.selected=='true'"
					ms-click="clickRow($event, $index)" ms-dblclick="editRow($event, $index)" ms-visible="filterArr[$index]">
					<td width="45" style="padding-top:8px;" ms-visible="checkbox">
						<i class="td_datagrid_icon" ms-class-1="td_datagrid_checked: el.selected==true||el.selected=='true'" ms-class-2="td_datagrid_unchecked: el.selected==false||el.selected=='false'" ms-click="clickCheckbox($event, $index)"></i>
					</td>
					<td class="padding_top" ms-repeat="cols" ms-attr-width="{{el.width}}"
						ms-attr-title="el.type == 'select' ? el.option[$outer.el[el.name]] : $outer.el[el.name]">
						<span ms-visible="editIdx!=$outer.$index">{{el.type == 'text' ? (el.render ? el.render($outer.el[el.name]) : $outer.el[el.name]) : (el.render ? el.render(el.option[$outer.el[el.name]]) : el.option[$outer.el[el.name]]) | html}}</span>
						<div ms-visible="editIdx==$outer.$index">
							<input type="text" ms-if="el.type == 'text'" ms-attr-disabled="el.disabled" ms-attr-value="$outer.el[el.name]" ms-keyup="changeCell($event, $outer.$index, $index, el.name)" ms-css-width="{{el.width - 15}}"/>
							<select ms-if="el.type == 'select'" ms-attr-disabled="el.disabled" ms-css-width="{{el.width - 15}}" ms-change="changeCell($event, $outer.$index, $index, el.name)" ms-duplex="$outer.el[el.name]">
								<option ms-repeat="el.option" ms-attr-value="{{$key}}">{{$val}}</option>
							</select>
						</div>
					</td>
					<td width="150">
						<div ms-visible="editIdx==$index">
							<a href="javascript:void(0)" class="btn btn-success btn-raised waves-effect waves-light" title="编辑" ms-click="submitEdit($event, $index)"><span class="glyphicon glyphicon-edit"></span></a>
							<a href="javascript:void(0)" class="btn btn-default btn-raised waves-effect waves-light" title="取消" ms-click="cancelEdit($event, $index)"><span class="glyphicon glyphicon-minus"></span></a>
						</div>
					</td>
					<td></td>
					<td ms-visible="!checkbox"></td>
				</tr>
				<tr ms-if="loadUrl != ''">
					<td class="padding_top" style="text-align:center;cursor:pointer;" ms-attr-colspan="cols.size() + 3" ms-click="loadData(null)">继续加载数据</td>
				</tr>
			</tbody>
		</table>
	</div>
	
	<div class="padding_left">
		<span>当前加载<strong>{{page}}</strong>页&nbsp;共加载<strong>{{rows.length}}</strong>条记录</span>&nbsp;&nbsp;{{loadInfo | html}}
	</div>
	
	<div class="td_datagrid_actions" ms-mouseenter="toggle($event, 'action', 'in')" ms-mouseleave="toggle($event, 'action', 'out')" ms-each="actions">
		<a class="btn btn-default waves-effect waves-light btn-lg" href="javascript:void(0)" ms-click="clickAction($event, el.fun)"
			ms-class-1="btn-primary: el.type=='primary'" ms-class-2="btn-success: el.type=='success'" ms-class-3="btn-info: el.type=='info'"
			ms-class-4="btn-warning: el.type=='warning'" ms-class-5="btn-danger: el.type=='danger'"
			ms-visible="($index==actions.size() - 1) ? true : showAction" ms-attr-title="el.title"><span ms-attr-class="el.icon"></span></a>
	</div>
	
	<div class="loading-mask" ms-visible="isLoading">
		<div class="loading-container">
			<div class="loading-speeding-wheel"></div><strong>数据加载中,请稍后…</strong>
		</div>
	</div>
</div>